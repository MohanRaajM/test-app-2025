import React from "react";
import "./QuarterSeasonPlans.scss";

// NOTE: react-slick expects window; if you use Next.js, load this component on the client
// or dynamic-import with { ssr: false }.
const Slider = require("react-slick").default as typeof import("react-slick").default;
require("slick-carousel/slick/slick.css");
require("slick-carousel/slick/slick-theme.css");

// Types
export type Game = {
  team: string;
  weekday: string; // e.g., "WED"
  date: string; // e.g., "OCT 22"
  time: string; // e.g., "7:00PM ET"
};

export type PlanColumnData = {
  title: string;
  games: Game[];
};

// --- Data (mirrors the screenshot content; adjust as needed) ---
const premiumPlan: PlanColumnData = {
  title: "Premium Plan",
  games: [
    { team: "Cleveland Cavaliers", weekday: "WED", date: "OCT 22", time: "7:00PM ET" },
    { team: "Milwaukee Bucks", weekday: "FRI", date: "NOV 28", time: "7:30PM ET" },
    { team: "Philadelphia 76ers", weekday: "FRI", date: "DEC 19", time: "7:00PM ET" },
    { team: "Cleveland Cavaliers", weekday: "THU", date: "DEC 25", time: "12:00PM ET" },
    { team: "Atlanta Hawks", weekday: "FRI", date: "JAN 2", time: "7:30PM ET" },
    { team: "Dallas Mavericks", weekday: "MON", date: "JAN 19", time: "5:00PM ET" },
    { team: "Los Angeles Lakers", weekday: "SUN", date: "FEB 1", time: "7:00PM ET" },
    { team: "Denver Nuggets", weekday: "WED", date: "FEB 4", time: "7:00PM ET" },
    { team: "Houston Rockets", weekday: "SAT", date: "FEB 21", time: "8:30PM ET" },
    { team: "San Antonio Spurs", weekday: "SUN", date: "MAR 1", time: "1:00PM ET" },
    { team: "Golden State Warriors", weekday: "SUN", date: "MAR 15", time: "8:00PM ET" },
  ],
};

const valuePlan: PlanColumnData = {
  title: "Value Plan",
  games: [
    { team: "Minnesota Timberwolves", weekday: "THU", date: "OCT 9", time: "7:30PM ET" },
    { team: "Indiana Pacers", weekday: "MON", date: "NOV 3", time: "7:30PM ET" },
    { team: "Memphis Grizzlies", weekday: "TUE", date: "NOV 11", time: "7:30PM ET" },
    { team: "Charlotte Hornets", weekday: "WED", date: "DEC 3", time: "7:30PM ET" },
    { team: "NBA Cup (TBD)", weekday: "TBD", date: "TBD", time: "" },
    { team: "Miami Heat", weekday: "SUN", date: "DEC 21", time: "6:00PM ET" },
    { team: "Brooklyn Nets", weekday: "WED", date: "JAN 21", time: "7:30PM ET" },
    { team: "Portland Trail Blazers", weekday: "FRI", date: "JAN 30", time: "7:30PM ET" },
    { team: "Indiana Pacers", weekday: "TUE", date: "MAR 17", time: "7:30PM ET" },
    { team: "New Orleans Pelicans", weekday: "TUE", date: "MAR 24", time: "7:30PM ET" },
    { team: "Boston Celtics", weekday: "THU", date: "APR 9", time: "7:30PM ET" },
  ],
};

const weekdayPlan: PlanColumnData = {
  title: "Weekday Plan",
  games: [
    { team: "Washington Wizards", weekday: "MON", date: "OCT 13", time: "7:30PM ET" },
    { team: "Boston Celtics", weekday: "FRI", date: "OCT 24", time: "7:30PM ET" },
    { team: "Minnesota Timberwolves", weekday: "WED", date: "NOV 5", time: "7:30PM ET" },
    { team: "Orlando Magic", weekday: "WED", date: "NOV 12", time: "7:00PM ET" },
    { team: "Utah Jazz", weekday: "FRI", date: "DEC 5", time: "7:30PM ET" },
    { team: "Los Angeles Clippers", weekday: "WED", date: "JAN 7", time: "7:30PM ET" },
    { team: "Sacramento Kings", weekday: "TUE", date: "JAN 27", time: "7:30PM ET" },
    { team: "Detroit Pistons", weekday: "THU", date: "FEB 19", time: "7:30PM ET" },
    { team: "Oklahoma City Thunder", weekday: "WED", date: "MAR 4", time: "7:00PM ET" },
    { team: "Indiana Pacers", weekday: "TUE", date: "MAR 17", time: "7:30PM ET" },
    { team: "Toronto Raptors", weekday: "FRI", date: "APR 10", time: "7:30PM ET" },
  ],
};

const weekendPlan: PlanColumnData = {
  title: "Weekend Plan",
  games: [
    { team: "Charlotte Hornets", weekday: "FRI", date: "OCT 17", time: "7:30PM ET" },
    { team: "Chicago Bulls", weekday: "SUN", date: "NOV 2", time: "7:00PM ET" },
    { team: "Brooklyn Nets", weekday: "SUN", date: "NOV 9", time: "6:00PM ET" },
    { team: "Miami Heat", weekday: "SUN", date: "NOV 14", time: "7:00PM ET" },
    { team: "Toronto Raptors", weekday: "SUN", date: "NOV 30", time: "6:00PM ET" },
    { team: "Orlando Magic", weekday: "SUN", date: "DEC 7", time: "12:00PM ET" },
    { team: "Philadelphia 76ers", weekday: "SAT", date: "JAN 3", time: "7:30PM ET" },
    { team: "Phoenix Suns", weekday: "SAT", date: "JAN 17", time: "7:30PM ET" },
    { team: "Washington Wizards", weekday: "SUN", date: "MAR 22", time: "7:30PM ET" },
    { team: "Chicago Bulls", weekday: "FRI", date: "APR 3", time: "7:30PM ET" },
    { team: "Charlotte Hornets", weekday: "SUN", date: "APR 12", time: "6:00PM ET" },
  ],
};

// --- UI components ---
const GameRow: React.FC<{ game: Game }> = ({ game }) => (
  <div className="qsp-row">
    <div className="qsp-logo" aria-hidden>
      {game.team.split(" ").slice(0, 2).map((w) => w[0]).join("")}
    </div>
    <div className="qsp-row-meta">
      <p className="qsp-team" title={game.team}>{game.team}</p>
      <p className="qsp-sub"><span className="qsp-date">{game.weekday} {game.date}</span> <span className="qsp-dot">â€¢</span> <span className="qsp-time">{game.time}</span></p>
    </div>
  </div>
);

const PlanColumn: React.FC<PlanColumnData> = ({ title, games }) => (
  <section className="qsp-col">
    <div className="qsp-col-head">
      <h3 className="qsp-col-title">{title}</h3>
    </div>
    <div className="qsp-list">
      {games.map((g, i) => (
        <div key={i} className="qsp-item">
          <GameRow game={g} />
          {i !== games.length - 1 && <hr className="qsp-item-sep" />}
        </div>
      ))}
    </div>
  </section>
);

export default function QuarterSeasonPlansDesktop() {
  const sliderSettings = {
    dots: true,
    arrows: false,
    infinite: false,
    speed: 400,
    slidesToShow: 1,
    slidesToScroll: 1,
    adaptiveHeight: true,
    responsive: [
      { breakpoint: 769, settings: { slidesToShow: 1, dots: true } },
      { breakpoint: 376, settings: { slidesToShow: 1, dots: true, adaptiveHeight: true, swipe: true } },
    ],
  } as const;

  return (
    <div className="qsp-root">
      <div className="qsp-wrap">
        <header className="qsp-header">
          <h1 className="qsp-title">Quarter Season Plans</h1>
          <p className="qsp-desc">Defend home court every single night and receive amazing membership experiences.</p>
        </header>

        {/* Desktop grid (>=769px) */}
        <main className="qsp-grid desktop-only">
          <PlanColumn {...premiumPlan} />
          <PlanColumn {...valuePlan} />
          <PlanColumn {...weekdayPlan} />
          <PlanColumn {...weekendPlan} />
        </main>

        {/* Slider for <=768px: one column per slide as in screenshot */}
        <div className="qsp-slider mobile-only">
          <Slider {...sliderSettings}>
            <div><PlanColumn {...premiumPlan} /></div>
            <div><PlanColumn {...valuePlan} /></div>
            <div><PlanColumn {...weekdayPlan} /></div>
            <div><PlanColumn {...weekendPlan} /></div>
          </Slider>
        </div>
      </div>
    </div>
  );
}
/* visibility helpers for slider vs desktop */
.desktop-only { display: grid; }
.mobile-only { display: none; }
@media (max-width: 768px) {
  .desktop-only { display: none; }
  .mobile-only { display: block; }
}

/* slider theming */
.qsp-slider .slick-dots li button:before { color: rgba(255,255,255,.6); opacity: 1; }
.qsp-slider .slick-dots li.slick-active button:before { color: #fff; opacity: 1; }
.qsp-slider .slick-dots { bottom: -20px; }
.qsp-slider .slick-slide > div { padding: 0 4px; }

/* tighten the column for small screens so it matches poster look */
@media (max-width: 768px) {
  .qsp-col { max-width: 560px; margin: 0 auto; }
  .qsp-col-title { font-size: 20px; }
  .qsp-row { padding: 10px 4px; }
  .qsp-logo { height: 36px; width: 36px; font-size: 11px; }
  .qsp-list { padding: 8px 12px 10px; }
}

/* Ultra-small screens (<=375px) adjustments */
@media (max-width: 375px) {
  .qsp-wrap { padding: 32px 14px 56px; }
  .qsp-title { font-size: 34px; line-height: 1.05; }
  .qsp-col { border-radius: 14px; }
  .qsp-col-title { font-size: 18px; }
  .qsp-list { padding: 8px 10px 10px; }
  .qsp-row { gap: 10px; padding: 10px 2px; }
  .qsp-logo { height: 34px; width: 34px; font-size: 10px; }
  .qsp-sub { font-size: 11px; }
  .qsp-slider .slick-dots { bottom: -18px; }
}
